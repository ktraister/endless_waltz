{{ define "content" }}    
  <main class="form-signin w-50 m-auto align-items-center">
    <div align=center>
      <form method="POST" action="/signUp">
	<input type="hidden" name="gorilla.csrf.Token" value="{{.TemplateTag}}">
	<img class="mb-4" src="/img/Icon.png" alt="" width="72" height="57">
	<h1 class="h1 mb-3 fw-normal">Create an Account</h1>
	<div class="form-floating">
	  <input type="text" name="email" class="form-control" id="floatingEmail" placeholder="Email" required>
	  <label for="floatingEmail">Email</label>
    	  <span id="emailError" style="color: red;"></span>
	  {{ if ne .Email "" }}
    	  <span id="userSubmitError" style="color: red;">Email '{{.Email}}' is already in use.</span>
	  {{ end }}
	</div>
	<div class="form-floating">
	  <input type="text" name="username" class="form-control" id="floatingUser" placeholder="Username" required>
	  <label for="floatingUser">Username</label>
    	  <span id="usernameError" style="color: red;"></span>
	  {{ if ne .Username "" }}
    	  <span id="userSubmitError" style="color: red;">Username '{{.Username}}' is already in use.</span>
	  {{ end }}
	</div>
	<div class="form-floating">
	  <input type="password" name="password" class="form-control" id="floatingPassword" placeholder="Password" required>
	  <label for="floatingPassword">Password</label>
	  <span id="passwordError" style="color: red;"></span>
	</div>
	<div class="form-floating">
	  <input type="password" name="confirm_password" class="form-control" id="floatingConfirm" placeholder="Confirm Password" required>
	  <label for="floatingConfirm">Confirm Password</label>
          <span id="passwordConfirmError" style="color: red;"></span>
	</div>
	<br>
	<br>
	<h2 class="h1 mb-3 fw-normal">Billing Options</h2>
        <p>Running a great (and discreet) service costs money.</p>
	<div class="grid-container">
	  <div class="grid-item"></div>
	  <div class="grid-item">Crypto Payments</div>
	  <div class="grid-item">Free Trial</div>  
	  <div class="grid-item">
	    <p class="h6 mb-6 fw-normal">7 Days</p>
	  </div>
	  <div class="grid-item">Monthly Cost</div>  
	  <div class="grid-item">
	    <p class="h6 mb-6 fw-normal">$2.99 USD</p>
	  </div>
	  <div class="grid-item">Accepted</div>
	  <div class="grid-item">
	    <p class="h6 mb-6 fw-normal">Bitcoin</p>
	    <p class="h6 mb-6 fw-normal">Bitcoin Cash</p>
	    <p class="h6 mb-6 fw-normal">Litecoin</p>
	    <p class="h6 mb-6 fw-normal">Ethereum</p>
	  </div>
	  <div class="grid-item">Pros</div>
	  <div class="grid-item">
	    <p class="h6 mb-6 fw-normal">Lower Cost</p>
	    <p class="h6 mb-6 fw-normal">Total Anonymity</p>
	  </div>
	  <div class="grid-item">Cons</div>
	  <div class="grid-item">
	    <p class="h6 mb-6 fw-normal">Requires manual interaction</p>
	  </div>
	</div>
	<br>
	<!--
	<div class="button-container">
	  <button class="btn btn-secondary w-20 py-2" id="crypto_button" onclick="crypto()">Pay with Crypto</button>
	  &nbsp;
	  <button class="btn btn-secondary w-20 py-2" id="card_button" onclick="card()">Pay With Card</button>
        </div>
	<br>
	<br>
	<div id="card" class="hidden">
	  <h2 class="h2 mb-3 fw-normal">Pay with Card</h2>
	  <input type="hidden" name="payment" value="card">
	  <p></p>
	</div>
	-->
	<br>
	<div id="crypto">
	  <h2 class="h2 mb-3 fw-normal">Selected: Pay with Crypto</h2>
	  <input type="hidden" name="payment" value="crypto">
          <p>Crypto payments require us to send you monthly emails with payment links. Be sure to make payments on time to avoid service interruption.</p>
	</div>
	<br>
        {{ if .CaptchaFail }}
        <span id="captchaSubmitError" style="color: red;">Captcha check failed - please try again</span>
	<br>
	<br>
        {{ end }}
	<div class="g-recaptcha" data-sitekey="6LcQtnsoAAAAAB2DskA6q-uUKpzbyEFvAQ0Kjzcm"></div>
	<br>
	<p style="font-size: 10px;">By clicking "Sign Up", you agree with the <a href="/privacy_policy">privacy policy</a> and <a href="/terms_and_conditions">terms and conditions</a>.</p>
	<button class="btn btn-primary w-50 py-2" type="submit" value="SignUp">Sign Up</button>
	<br>
	<br>
      </form>
    </div>
    <script>
    document.querySelector('form').addEventListener('submit', function(event) {
        const email = document.querySelector('#floatingEmail').value;
        const username = document.querySelector('#floatingUser').value;
        const password = document.querySelector('#floatingPassword').value;
        const Cpassword = document.querySelector('#floatingConfirm').value;
        const emailError = document.querySelector('#emailError');
        const usernameError = document.querySelector('#usernameError');
        const passwordError = document.querySelector('#passwordError');
        const CpasswordError = document.querySelector('#passwordConfirmError');

        //email correctness check
        var format = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        if (! format.test(email)) {
            emailError.textContent = 'Email does not appear to be valid';
            event.preventDefault(); // Prevent form submission
	    return

	} else {
            emailError.textContent = ''; // Clear any previous error message
        }

	//username special char check
        var format = /[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;
        if (format.test(username)) {
            usernameError.textContent = 'Username must not contain special characters';
            event.preventDefault(); // Prevent form submission
	    return

	} else {
            usernameError.textContent = ''; // Clear any previous error message
        }

	let passText = 'Password Requirements: \
		        At least 8 characters long,  \
		        At least 1 Special Character (!@#$%^&*),  \
		        At least 1 Upper Case Character, \
		        At least 1 lower case character \
		        ';

        //password length and complexity check 
        format = /^(?=.*[A-Z])(?=.*[!@#$&*])(?=.*[0-9])(?=.*[a-z]).{8,}$/;
        if (! format.test(password)) {
            passwordError.textContent = passText;
            event.preventDefault(); // Prevent form submission
	    return

	}  else {
            passwordError.textContent = ''; // Clear any previous error message
        }

        //pass match check
        if (password != Cpassword) {
            passwordConfirmError.textContent = 'Password does not match confirmation';
            event.preventDefault(); // Prevent form submission
	    return
        }  else {
            passwordConfirmError.textContent = ''; // Clear any previous error message
        }
 
    });
    function crypto() {
	var content1 = document.getElementById("crypto");
	var content2 = document.getElementById("card");
        content1.classList.remove("hidden");
        content2.classList.add("hidden");
    }
    function card() {
	var content1 = document.getElementById("crypto");
	var content2 = document.getElementById("card");
        content2.classList.remove("hidden");
        content1.classList.add("hidden");
    }
    </script>
  </main>

{{ end }}
